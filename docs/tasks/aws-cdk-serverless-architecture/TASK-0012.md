# TASK-0012: ECS Cluster Construct å®Ÿè£… âœ… **å®Œäº†** (TDDé–‹ç™ºå®Œäº† - 15ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å…¨é€šé)

**ã‚¿ã‚¹ã‚¯ID**: TASK-0012
**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**: TDD
**æ¨å®šå·¥æ•°**: 4æ™‚é–“
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 3 - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
**ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«**: ğŸ”µ *è¦ä»¶å®šç¾©æ›¸ãƒ»è¨­è¨ˆæ–‡æ›¸ã‚ˆã‚Š*
**å®Œäº†æ—¥**: 2026-01-24

## é–¢é€£æ–‡æ›¸

- **æ¦‚è¦**: [ğŸ“‹ overview.md](overview.md)
- **è¦ä»¶å®šç¾©**: [ğŸ“‹ requirements.md](../../spec/aws-cdk-serverless-architecture/requirements.md) - REQ-012, REQ-013
- **è¨­è¨ˆæ–‡æ›¸**: [ğŸ“ architecture.md](../../design/aws-cdk-serverless-architecture/architecture.md)

## ã‚¿ã‚¹ã‚¯æ¦‚è¦

ECS Fargate Cluster ã‚’ä½œæˆã™ã‚‹ CDK Construct ã‚’å®Ÿè£…ã—ã¾ã™ã€‚Container Insights ã‚’æœ‰åŠ¹åŒ–ã—ã€ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†ã¨ãƒ­ã‚°åˆ†æã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚

## ä¾å­˜ã‚¿ã‚¹ã‚¯

- **å‰æã‚¿ã‚¹ã‚¯**: [TASK-0010](TASK-0010.md) - VPC Construct å®Ÿè£…
- **å¾Œç¶šã‚¿ã‚¹ã‚¯**: [TASK-0013](TASK-0013.md) - Sidecar Container ã‚¤ãƒ¡ãƒ¼ã‚¸ä½œæˆ, [TASK-0014](TASK-0014.md) - Task Definition Construct å®Ÿè£…

## å®Œäº†æ¡ä»¶

- [x] ECS Cluster Construct ãŒæ­£å¸¸ã«ä½œæˆã•ã‚Œã‚‹ã“ã¨
- [x] Fargate èµ·å‹•ã‚¿ã‚¤ãƒ—ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã“ã¨
- [x] Container Insights ãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã“ã¨
- [x] ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãŒã™ã¹ã¦ãƒ‘ã‚¹ã™ã‚‹ã“ã¨
- [x] ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹ã™ã‚‹ã“ã¨

---

## ä¸»è¦å®Ÿè£…é …ç›®

### ECS Fargate Cluster ä½œæˆ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *REQ-012 ã‚ˆã‚Š*

ECS Cluster ã‚’ Fargate èµ·å‹•ã‚¿ã‚¤ãƒ—ã§ä½œæˆã—ã¾ã™ã€‚EC2 ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ç®¡ç†ãŒä¸è¦ãªã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã‚³ãƒ³ãƒ†ãƒŠå®Ÿè¡Œç’°å¢ƒã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/construct/ecs-cluster-construct.ts`

```typescript
// åŸºæœ¬æ§‹é€ 
import * as ecs from 'aws-cdk-lib/aws-ecs';

const cluster = new ecs.Cluster(this, 'Cluster', {
  vpc: props.vpc,
  clusterName: `${props.projectName}-cluster`,
  containerInsights: true,
});
```

### Container Insights æœ‰åŠ¹åŒ– ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *REQ-013 ã‚ˆã‚Š*

Container Insights ã‚’æœ‰åŠ¹åŒ–ã—ã€ã‚³ãƒ³ãƒ†ãƒŠãƒ¬ãƒ™ãƒ«ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼ˆCPUã€ãƒ¡ãƒ¢ãƒªã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼‰ã‚’ CloudWatch ã«é€ä¿¡ã—ã¾ã™ã€‚

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/construct/ecs-cluster-construct.ts`

---

## åŸºæœ¬çš„ãªãƒ†ã‚¹ãƒˆè¦ä»¶

### Cluster ä½œæˆãƒ†ã‚¹ãƒˆ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *REQ-012 ã‚ˆã‚Š*

- ECS Cluster ãƒªã‚½ãƒ¼ã‚¹ãŒä½œæˆã•ã‚Œã‚‹ã“ã¨
- Cluster åãŒå‘½åè¦å‰‡ã«å¾“ã£ã¦ã„ã‚‹ã“ã¨

### Container Insights è¨­å®šãƒ†ã‚¹ãƒˆ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *REQ-013 ã‚ˆã‚Š*

- containerInsights ãŒ enabled ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨

### ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒ†ã‚¹ãƒˆ ğŸ”µ

**ä¿¡é ¼æ€§**: ğŸ”µ *è¨­è¨ˆæ–‡æ›¸ã‚ˆã‚Š*

- CloudFormation ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒæœŸå¾…é€šã‚Šã«ç”Ÿæˆã•ã‚Œã‚‹ã“ã¨

---

## å®Ÿè£…æ‰‹é †

### TDDã‚¿ã‚¹ã‚¯ã®å ´åˆ

1. `/tsumiki:tdd-requirements TASK-0012` - è©³ç´°è¦ä»¶å®šç¾©
2. `/tsumiki:tdd-testcases` - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ
3. `/tsumiki:tdd-red` - ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼ˆå¤±æ•—ï¼‰
4. `/tsumiki:tdd-green` - æœ€å°å®Ÿè£…
5. `/tsumiki:tdd-refactor` - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
6. `/tsumiki:tdd-verify-complete` - å“è³ªç¢ºèª

---

## ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚µãƒãƒªãƒ¼

- **ç·é …ç›®æ•°**: 5é …ç›®
- ğŸ”µ **é’ä¿¡å·**: 5é …ç›® (100%)
- ğŸŸ¡ **é»„ä¿¡å·**: 0é …ç›® (0%)
- ğŸ”´ **èµ¤ä¿¡å·**: 0é …ç›® (0%)

**å“è³ªè©•ä¾¡**: é«˜å“è³ª
