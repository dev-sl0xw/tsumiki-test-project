# serverless-ec-site 設計ヒアリング記録

**作成日**: 2026-01-11
**ヒアリング実施**: step4 既存情報ベースの差分ヒアリング

## ヒアリング目的

タスクノートの技術スタック情報を基に、ECサイトの詳細設計に必要な情報を明確化するためのヒアリングを実施しました。

## 質問と回答

### Q1: ECサイトのターゲットユーザーはどなたですか？

**質問日時**: 2026-01-11
**カテゴリ**: アーキテクチャ/ビジネス要件
**背景**: ECサイトの設計はB2C/B2Bで大きく異なるため確認が必要

**回答**: B2C（一般消費者）

**信頼性への影響**:

- この回答により、ユーザー認証・UI設計の方針が 🔴 → 🔵 に向上
- 一般消費者向けのシンプルなUX設計を採用

---

### Q2: 商品カタログの規模感を教えてください

**質問日時**: 2026-01-11
**カテゴリ**: データモデル/パフォーマンス
**背景**: 商品数によってデータベース設計・検索方式が異なるため確認が必要

**回答**: 中規模（100-1000件）

**信頼性への影響**:

- この回答により、DynamoDB GSI設計の方針が 🔴 → 🔵 に向上
- 中規模のため、DynamoDB Scanでの検索でも許容可能と判断

---

### Q3: 決済方法はどれをサポートしますか？

**質問日時**: 2026-01-11
**カテゴリ**: 技術選択/外部連携
**背景**: 決済方法によって外部サービス連携・注文フローが変わるため確認が必要

**回答**: クレジットカード、代引き、銀行振込、コンビニ決済

**信頼性への影響**:

- この回答により、決済連携設計が 🔴 → 🔵 に向上
- Stripe（クレジットカード・コンビニ決済）+ 内部管理（代引き・銀行振込）の構成を決定

---

### Q4: ユーザー認証の方式はどれを希望しますか？

**質問日時**: 2026-01-11
**カテゴリ**: セキュリティ/認証
**背景**: Cognitoの設定・フロントエンド実装に影響するため確認が必要

**回答**: メール/パスワード、ソーシャルログイン、ゲスト購入

**信頼性への影響**:

- この回答により、認証設計が 🔴 → 🔵 に向上
- Cognito User Pool + Identity Providersの構成を決定
- ゲストカート機能の追加を決定

---

### Q5: 想定される同時アクセス数はどの程度ですか？

**質問日時**: 2026-01-11
**カテゴリ**: パフォーマンス/スケーラビリティ
**背景**: インフラ設計・Lambda同時実行数設定に影響するため確認が必要

**回答**: 中規模（100-1000人）

**信頼性への影響**:

- この回答により、パフォーマンス設計が 🔴 → 🔵 に向上
- Lambda/DynamoDBのデフォルト設定で対応可能と判断

---

### Q6: APIのレスポンスタイムの目標は？

**質問日時**: 2026-01-11
**カテゴリ**: パフォーマンス
**背景**: キャッシュ戦略・最適化要件に影響するため確認が必要

**回答**: 標準（3秒以内）

**信頼性への影響**:

- この回答により、パフォーマンス要件が 🔴 → 🔵 に向上
- 積極的なキャッシュは不要、基本的なCloudFrontキャッシュで対応

---

### Q7: 多言語対応は必要ですか？

**質問日時**: 2026-01-11
**カテゴリ**: データモデル/フロントエンド
**背景**: 商品データ構造・UI実装に大きく影響するため確認が必要

**回答**: 多言語（日本語、英語、韓国語）

**信頼性への影響**:

- この回答により、データモデル設計が 🔴 → 🔵 に向上
- LocalizedText型の導入を決定
- react-i18nextの採用を決定

---

### Q8: 配送先はどの地域を想定していますか？

**質問日時**: 2026-01-11
**カテゴリ**: ビジネス要件/データモデル
**背景**: 住所フォーマット・配送料計算ロジックに影響するため確認が必要

**回答**: 全世界

**信頼性への影響**:

- この回答により、配送機能設計が 🔴 → 🔵 に向上
- 国際住所フォーマット対応の必要性を確認
- 配送料計算APIの追加を決定

---

### Q9: メール通知機能は必要ですか？

**質問日時**: 2026-01-11
**カテゴリ**: 機能要件/外部連携
**背景**: SES連携・テンプレート管理の必要性を確認するため

**回答**: 必要

**信頼性への影響**:

- この回答により、通知機能設計が 🔴 → 🔵 に向上
- Amazon SES + 多言語テンプレートの構成を決定

---

### Q10: MVP（最小限の製品）として必須の機能はどれですか？

**質問日時**: 2026-01-11
**カテゴリ**: 優先順位/スコープ
**背景**: 設計の優先順位付けとフェーズ分けに影響するため確認が必要

**回答**: 商品カタログ、カート・注文、ユーザー認証、決済連携

**信頼性への影響**:

- この回答により、設計スコープが 🔴 → 🔵 に向上
- 全機能がMVPに含まれることを確認
- 管理画面は対象外であることを確認

---

## ヒアリング結果サマリー

### 確認できた事項

- ターゲットユーザー: B2C（一般消費者）
- 商品規模: 中規模（100-1000件）
- 決済方法: クレジットカード、代引き、銀行振込、コンビニ決済
- 認証方式: メール/パスワード、ソーシャルログイン、ゲスト購入
- 同時アクセス: 中規模（100-1000人）
- レスポンス目標: 3秒以内
- 多言語: 日本語、英語、韓国語
- 配送地域: 全世界
- メール通知: 必要
- MVP: 全主要機能（商品、カート、認証、決済）

### 設計方針の決定事項

- サーバーレスアーキテクチャ（AWS Lambda + DynamoDB）採用
- Cognito + Stripeによる認証・決済連携
- 多言語対応データモデル（LocalizedText型）
- ゲストカート機能の実装
- Amazon SESによるメール通知

### 残課題

- 配送料の具体的な料金体系（設計後に確認）
- 税金計算ロジックの詳細（国別対応）
- 管理画面は将来フェーズで検討

### 信頼性レベル分布

**ヒアリング前**:

- 🔵 青信号: 5件（タスクノートからの確実な情報）
- 🟡 黄信号: 10件
- 🔴 赤信号: 15件

**ヒアリング後**:

- 🔵 青信号: 25件 (+20件)
- 🟡 黄信号: 5件 (-5件)
- 🔴 赤信号: 0件 (-15件)

## 関連文書

- **アーキテクチャ設計**: [architecture.md](architecture.md)
- **データフロー**: [dataflow.md](dataflow.md)
- **型定義**: [interfaces.ts](interfaces.ts)
- **DBスキーマ**: [database-schema.md](database-schema.md)
- **API仕様**: [api-endpoints.md](api-endpoints.md)
- **コンテキストノート**: [note.md](../../spec/serverless-ec-site/note.md)
