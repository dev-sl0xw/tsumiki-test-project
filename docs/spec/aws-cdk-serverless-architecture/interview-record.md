# AWS CDK サーバーレスWebサービスアーキテクチャ ヒアリング記録

**作成日**: 2026-01-12
**ヒアリング実施**: step4 既存情報ベースの差分ヒアリング

## ヒアリング目的

既存の要件定義書（requirements.md）を確認し、不明点や曖昧な部分を明確化するためのヒアリングを実施しました。

---

## 質問と回答

### Q1: Aurora MySQL の構成について

**質問日時**: 2026-01-12
**カテゴリ**: 既存設計確認
**背景**: requirements.md では「Serverless v2 または Provisioned」と記載されており、どちらを採用するか明確でなかった

**質問内容**: Aurora MySQL の構成について、Serverless v2 と Provisioned のどちらを使用しますか？

**回答**: **Serverless v2**

**信頼性への影響**:
- この回答により、REQ-022 の信頼性レベルが 🟡 → 🔵 に向上
- Aurora の構成が確定し、スケーリング戦略が明確化された

---

### Q2: ECS Fargate のリソースサイズ

**質問日時**: 2026-01-12
**カテゴリ**: 既存設計確認
**背景**: requirements.md では「例: 1 vCPU, 2GB」と記載されていたが、確定していなかった

**質問内容**: ECS Fargate のリソースサイズ（CPU/Memory）の想定は？

**回答**: **0.5 vCPU / 1GB**

**信頼性への影響**:
- この回答により、REQ-014 の信頼性レベルが 🟡 → 🔵 に向上
- コスト見積もりとパフォーマンス設計の基準が確定

---

### Q3: アプリケーションの構成

**質問日時**: 2026-01-12
**カテゴリ**: 未定義部分詳細化
**背景**: requirements.md では「Frontend/Backend 分離配備時各々別途サービスで構成」と言及されていたが、確定していなかった

**質問内容**: アプリケーションの構成について教えてください。フロントエンドとバックエンドは分離しますか？

**回答**: **Frontend/Backend 分離**

**信頼性への影響**:
- この回答により、REQ-021 を新規追加（信頼性レベル: 🔵）
- ECS Service の設計方針が確定

---

### Q4: WAF の適用先

**質問日時**: 2026-01-12
**カテゴリ**: 既存設計確認
**背景**: requirements.md では「CloudFront または ALB に接続」と記載されており、どちらを採用するか明確でなかった

**質問内容**: WAF の適用先はどちらですか？

**回答**: **CloudFront**

**信頼性への影響**:
- この回答により、REQ-033 の信頼性レベルが 🟡 → 🔵 に向上
- セキュリティアーキテクチャが確定

---

### Q5: デプロイ環境数

**質問日時**: 2026-01-12
**カテゴリ**: 未定義部分詳細化
**背景**: requirements.md では環境数について明示されていなかった

**質問内容**: デプロイ環境はいくつ必要ですか？

**回答**: **Dev + Prod（2環境）**

**信頼性への影響**:
- この回答により、REQ-042 を新規追加（信頼性レベル: 🔵）
- 環境別のパラメータ設計が可能になった

---

### Q6: SSL証明書の管理方法

**質問日時**: 2026-01-12
**カテゴリ**: 未定義部分詳細化
**背景**: requirements.md では SSL 証明書の管理方法について言及がなかった

**質問内容**: SSL証明書の管理方法は？

**回答**: **ACM (AWS Certificate Manager)**

**信頼性への影響**:
- この回答により、REQ-030 を新規追加（信頼性レベル: 🔵）
- 証明書の自動更新・管理戦略が確定

---

### Q7: カスタムドメインの使用

**質問日時**: 2026-01-12
**カテゴリ**: 未定義部分詳細化
**背景**: requirements.md ではドメイン戦略について言及がなかった

**質問内容**: カスタムドメインは使用しますか？

**回答**: **いいえ（デフォルトドメインを使用）**

**信頼性への影響**:
- この回答により、REQ-043 を新規追加（信頼性レベル: 🔵）
- Route 53 統合は不要と確定
- DNS 設計のスコープから除外

---

### Q8: CI/CD パイプラインの必要性

**質問日時**: 2026-01-12
**カテゴリ**: 追加要件
**背景**: requirements.md では CI/CD について明示的な要件がなかった

**質問内容**: CI/CDパイプラインの構築は必要ですか？

**回答**: **必要**

**信頼性への影響**:
- この回答により、REQ-040, REQ-041 を新規追加（信頼性レベル: 🔵, 🟡）
- デプロイ自動化の要件が追加された

---

### Q9: バックアップ要件

**質問日時**: 2026-01-12
**カテゴリ**: 追加要件
**背景**: requirements.md ではバックアップ戦略について明示されていなかった

**質問内容**: バックアップ要件について教えてください

**回答**: **Aurora 自動バックアップ**

**信頼性への影響**:
- この回答により、REQ-027 を新規追加（信頼性レベル: 🔵）
- 追加のスナップショット戦略は不要と確定

---

### Q10: ログの長期保存先

**質問日時**: 2026-01-12
**カテゴリ**: 既存設計確認
**背景**: requirements.md では「S3 Glacier に移管または削除」と記載されており、確定していなかった

**質問内容**: ログの長期保存先は？

**回答**: **S3 Glacier**

**信頼性への影響**:
- この回答により、REQ-038, REQ-101 の信頼性レベルが 🟡 → 🔵 に向上
- ログライフサイクル戦略が確定

---

### Q11: Must Have の機能

**質問日時**: 2026-01-12
**カテゴリ**: 優先順位
**背景**: 実装の優先順位を明確化するため

**質問内容**: 以下の機能の中で、Must Have（必須）の項目を選択してください

**回答**:
- VPC・ネットワーク ✓
- ECS Fargate ✓
- Aurora MySQL ✓
- ALB + CloudFront ✓

**信頼性への影響**:
- すべての基盤コンポーネントが Must Have として確定
- 実装フェーズの優先順位が明確化

---

### Q12: Should Have の機能

**質問日時**: 2026-01-12
**カテゴリ**: 優先順位
**背景**: 実装の優先順位を明確化するため

**質問内容**: 以下の機能の中で、Should Have（あると良い）の項目を選択してください

**回答**:
- WAF ✓
- CI/CD Pipeline ✓
- CloudWatch アラーム ✓
- AWS Chatbot ✓

**信頼性への影響**:
- 運用・セキュリティ関連機能の優先度が確定
- 実装フェーズの計画に反映可能

---

## ヒアリング結果サマリー

### 確認できた事項

1. **Aurora MySQL**: Serverless v2 を採用
2. **ECS リソース**: 0.5 vCPU / 1GB Memory
3. **アプリ構成**: Frontend/Backend 分離
4. **WAF 適用先**: CloudFront
5. **環境数**: Dev + Prod の 2 環境
6. **SSL 管理**: ACM を使用
7. **ドメイン**: デフォルトドメイン使用（カスタムドメイン不使用）
8. **CI/CD**: 必要（CodePipeline/CodeBuild）
9. **バックアップ**: Aurora 自動バックアップ
10. **ログ保存**: Prod は S3 Glacier へ長期保存

### 追加/変更要件

1. **REQ-014**: リソースサイズ確定（1 vCPU/2GB → 0.5 vCPU/1GB）
2. **REQ-021**: Frontend/Backend 分離構成の明示化
3. **REQ-030**: ACM による SSL 証明書管理
4. **REQ-040-041**: CI/CD パイプライン要件追加
5. **REQ-042**: 2 環境構成の明示化
6. **REQ-043**: デフォルトドメイン使用の明示化

### 残課題

1. **EDGE-101**: VPC CIDR IP 枯渇時の対応策（要検討）
2. **EDGE-102**: ECS メモリ上限到達時の動作（要検討）
3. **REQ-041**: CI/CD の詳細設計（CodePipeline/CodeBuild の具体的構成）

### 信頼性レベル分布

**ヒアリング前**:
- 🔵 青信号: 42件
- 🟡 黄信号: 12件
- 🔴 赤信号: 5件

**ヒアリング後**:
- 🔵 青信号: 52件 (+10)
- 🟡 黄信号: 5件 (-7)
- 🔴 赤信号: 2件 (-3)

---

## 関連文書

- **要件定義書**: [requirements.md](requirements.md)
- **ユーザストーリー**: [user-stories.md](user-stories.md)
- **受け入れ基準**: [acceptance-criteria.md](acceptance-criteria.md)
- **コンテキストノート**: [note.md](note.md)
