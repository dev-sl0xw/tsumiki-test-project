/**
 * ECS Cluster Construct ãƒ†ã‚¹ãƒˆ
 *
 * TASK-0012: ECS Cluster Construct å®Ÿè£…
 * ãƒ•ã‚§ãƒ¼ã‚º: TDD Refactor Phase - ã‚³ãƒ¼ãƒ‰å“è³ªæ”¹å–„å¾Œã®ãƒ†ã‚¹ãƒˆ
 *
 * ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹:
 * - TC-ECS-CLUSTER-01: ECS Cluster ãƒªã‚½ãƒ¼ã‚¹ä½œæˆç¢ºèª
 * - TC-ECS-CLUSTER-02: Cluster åæŒ‡å®šæ™‚ã®ç¢ºèª
 * - TC-ECS-CLUSTER-03: Container Insights æœ‰åŠ¹åŒ–ç¢ºèªï¼ˆæ˜ç¤ºçš„æŒ‡å®šï¼‰
 * - TC-ECS-CLUSTER-04: å…¬é–‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ cluster ç¢ºèª
 * - TC-ECS-CLUSTER-05: VPC é–¢é€£ä»˜ã‘ç¢ºèª
 * - TC-ECS-CLUSTER-06: Fargate å°‚ç”¨ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ç¢ºèª
 * - TC-ECS-CLUSTER-07: cluster.clusterName ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ç¢ºèª
 * - TC-ECS-CLUSTER-08: Container Insights ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ç¢ºèª
 * - TC-ECS-CLUSTER-09: Cluster åãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ç¢ºèª
 * - TC-ECS-CLUSTER-10: Cluster åæœ€å¤§é•·ç¢ºèª
 * - TC-ECS-CLUSTER-11: Cluster åæœ€å°é•·ç¢ºèª
 * - TC-ECS-CLUSTER-12: Container Insights ç„¡åŠ¹åŒ–ç¢ºèª
 * - TC-ECS-CLUSTER-13: ç‰¹æ®Šæ–‡å­—ã‚’å«ã‚€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åç¢ºèª
 * - TC-ECS-CLUSTER-14: è¤‡æ•°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆç¢ºèª
 * - TC-ECS-CLUSTER-15: CloudFormation ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆç¢ºèª
 *
 * ã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¯¾å¿œã€‘: containerInsightsV2 ã¸ã®ç§»è¡Œã«ã‚ˆã‚Šã€å€¤ãŒ 'enabled' -> 'enhanced' ã«å¤‰æ›´
 *
 * ğŸ”µ ä¿¡é ¼æ€§: è¦ä»¶å®šç¾©æ›¸ REQ-012, REQ-013, NFR-301 ã«åŸºã¥ããƒ†ã‚¹ãƒˆ
 */

import * as cdk from 'aws-cdk-lib';
import * as ec2 from 'aws-cdk-lib/aws-ec2';
import { Template, Match } from 'aws-cdk-lib/assertions';
import { EcsClusterConstruct } from '../../../lib/construct/ecs/ecs-cluster-construct';

describe('EcsClusterConstruct', () => {
  // ã€ãƒ†ã‚¹ãƒˆå‰æº–å‚™ã€‘: å„ãƒ†ã‚¹ãƒˆã§ç‹¬ç«‹ã—ãŸ CDK App ã¨ Stack ã‚’ä½œæˆ
  // ã€ç’°å¢ƒåˆæœŸåŒ–ã€‘: å‰ã®ãƒ†ã‚¹ãƒˆã®çŠ¶æ…‹ãŒå½±éŸ¿ã—ãªã„ã‚ˆã†ã€æ–°ã—ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ç”¨
  let app: cdk.App;
  let stack: cdk.Stack;
  let vpc: ec2.IVpc;

  beforeEach(() => {
    // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: CDK App ã¨ Stack ã‚’ä½œæˆ
    // ã€åˆæœŸæ¡ä»¶è¨­å®šã€‘: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§ VPC ã‚’ä½œæˆ
    app = new cdk.App();
    stack = new cdk.Stack(app, 'TestStack', {
      env: {
        account: '123456789012',
        region: 'ap-northeast-1',
      },
    });
    vpc = new ec2.Vpc(stack, 'TestVpc');
  });

  afterEach(() => {
    // ã€ãƒ†ã‚¹ãƒˆå¾Œå‡¦ç†ã€‘: æ˜ç¤ºçš„ãªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã¯ä¸è¦
    // ã€çŠ¶æ…‹å¾©å…ƒã€‘: Jest ãŒè‡ªå‹•çš„ã«ãƒ†ã‚¹ãƒˆé–“ã®åˆ†é›¢ã‚’ä¿è¨¼
  });

  // ============================================================================
  // æ­£å¸¸ç³»ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
  // ============================================================================

  describe('æ­£å¸¸ç³»', () => {
    // ============================================================================
    // TC-ECS-CLUSTER-01: ECS Cluster ãƒªã‚½ãƒ¼ã‚¹ä½œæˆç¢ºèª
    // ğŸ”µ ä¿¡é ¼æ€§: REQ-012 ã‚ˆã‚Š
    // ============================================================================
    describe('TC-ECS-CLUSTER-01: ECS Cluster ãƒªã‚½ãƒ¼ã‚¹ä½œæˆç¢ºèª', () => {
      // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: ECS Cluster ãŒæ­£ã—ãä½œæˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
      // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: EcsClusterConstruct ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã—ã€ç”Ÿæˆã•ã‚Œã‚‹ CloudFormation ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æ¤œè¨¼
      // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: AWS::ECS::Cluster ãƒªã‚½ãƒ¼ã‚¹ãŒ 1 ã¤ä½œæˆã•ã‚Œã‚‹
      // ğŸ”µ ä¿¡é ¼æ€§: REQ-012 ã‚ˆã‚Š

      test('ECS Cluster ãŒä½œæˆã•ã‚Œã‚‹ã“ã¨', () => {
        // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§ EcsClusterConstruct ã‚’ä½œæˆ
        new EcsClusterConstruct(stack, 'TestCluster', { vpc });
        const template = Template.fromStack(stack);

        // ã€æ¤œè¨¼é …ç›®ã€‘: ECS Cluster ãƒªã‚½ãƒ¼ã‚¹ã®å­˜åœ¨ç¢ºèª
        // ğŸ”µ ä¿¡é ¼æ€§: REQ-012 ã‚ˆã‚Š
        template.resourceCountIs('AWS::ECS::Cluster', 1);
      });
    });

    // ============================================================================
    // TC-ECS-CLUSTER-02: Cluster åæŒ‡å®šæ™‚ã®ç¢ºèª
    // ğŸ”µ ä¿¡é ¼æ€§: è¨­è¨ˆæ–‡æ›¸ã‚ˆã‚Š
    // ============================================================================
    describe('TC-ECS-CLUSTER-02: Cluster åæŒ‡å®šæ™‚ã®ç¢ºèª', () => {
      // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åã‚’æŒ‡å®šã—ãŸå ´åˆã€ãã®åå‰ãŒæ­£ã—ãè¨­å®šã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
      // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: Props ã§ clusterName ã‚’æŒ‡å®šã—ãŸå ´åˆã®å‹•ä½œã‚’æ¤œè¨¼
      // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ClusterName ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«æŒ‡å®šã—ãŸåå‰ãŒè¨­å®šã•ã‚Œã‚‹
      // ğŸ”µ ä¿¡é ¼æ€§: è¨­è¨ˆæ–‡æ›¸ã‚ˆã‚Š

      test('æŒ‡å®šã—ãŸã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åãŒè¨­å®šã•ã‚Œã‚‹ã“ã¨', () => {
        // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: clusterName ã‚’æŒ‡å®šã—ã¦ EcsClusterConstruct ã‚’ä½œæˆ
        new EcsClusterConstruct(stack, 'TestCluster', {
          vpc,
          clusterName: 'my-test-cluster',
        });
        const template = Template.fromStack(stack);

        // ã€æ¤œè¨¼é …ç›®ã€‘: ClusterName ã®å€¤ç¢ºèª
        // ğŸ”µ ä¿¡é ¼æ€§: è¨­è¨ˆæ–‡æ›¸ã‚ˆã‚Š
        template.hasResourceProperties('AWS::ECS::Cluster', {
          ClusterName: 'my-test-cluster',
        });
      });
    });

    // ============================================================================
    // TC-ECS-CLUSTER-03: Container Insights æœ‰åŠ¹åŒ–ç¢ºèªï¼ˆæ˜ç¤ºçš„æŒ‡å®šï¼‰
    // ğŸ”µ ä¿¡é ¼æ€§: REQ-013, NFR-301 ã‚ˆã‚Š
    // ============================================================================
    describe('TC-ECS-CLUSTER-03: Container Insights æœ‰åŠ¹åŒ–ç¢ºèªï¼ˆæ˜ç¤ºçš„æŒ‡å®šï¼‰', () => {
      // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: containerInsights: true ã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã—ãŸå ´åˆã®å‹•ä½œç¢ºèª
      // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: Container Insights ãŒæ˜ç¤ºçš„ã«æœ‰åŠ¹åŒ–ã•ã‚Œã‚‹ã“ã¨ã‚’æ¤œè¨¼
      // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ClusterSettings ã« containerInsights: enabled ãŒå«ã¾ã‚Œã‚‹
      // ğŸ”µ ä¿¡é ¼æ€§: REQ-013, NFR-301 ã‚ˆã‚Š

      test('Container Insights ãŒæœ‰åŠ¹åŒ–ã•ã‚Œã‚‹ã“ã¨ (æ˜ç¤ºçš„æŒ‡å®š)', () => {
        // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: containerInsights: true ã‚’æŒ‡å®šã—ã¦ EcsClusterConstruct ã‚’ä½œæˆ
        new EcsClusterConstruct(stack, 'TestCluster', {
          vpc,
          containerInsights: true,
        });
        const template = Template.fromStack(stack);

        // ã€æ¤œè¨¼é …ç›®ã€‘: ClusterSettings ã® containerInsights è¨­å®šç¢ºèª
        // ã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¯¾å¿œã€‘: containerInsightsV2 ã§ã¯ 'enhanced'ï¼ˆENHANCED ãƒ¢ãƒ¼ãƒ‰ï¼‰
        // ğŸ”µ ä¿¡é ¼æ€§: REQ-013, NFR-301 ã‚ˆã‚Š
        template.hasResourceProperties('AWS::ECS::Cluster', {
          ClusterSettings: Match.arrayWith([
            Match.objectLike({
              Name: 'containerInsights',
              Value: 'enhanced',
            }),
          ]),
        });
      });
    });

    // ============================================================================
    // TC-ECS-CLUSTER-04: å…¬é–‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ cluster ç¢ºèª
    // ğŸ”µ ä¿¡é ¼æ€§: è¨­è¨ˆæ–‡æ›¸ note.md ã‚ˆã‚Š
    // ============================================================================
    describe('TC-ECS-CLUSTER-04: å…¬é–‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ cluster ç¢ºèª', () => {
      // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: å…¬é–‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ cluster ãŒæ­£ã—ãå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
      // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: cluster ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒ ecs.ICluster å‹ã§å–å¾—ã§ãã‚‹ã“ã¨ã‚’æ¤œè¨¼
      // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ecsClusterConstruct.cluster ãŒ undefined ã§ã¯ãªã„ã“ã¨
      // ğŸ”µ ä¿¡é ¼æ€§: è¨­è¨ˆæ–‡æ›¸ note.md ã‚ˆã‚Š

      test('cluster ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã“ã¨', () => {
        // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§ EcsClusterConstruct ã‚’ä½œæˆ
        const ecsClusterConstruct = new EcsClusterConstruct(stack, 'TestCluster', { vpc });

        // ã€æ¤œè¨¼é …ç›®ã€‘: cluster ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å­˜åœ¨ç¢ºèª
        // ğŸ”µ ä¿¡é ¼æ€§: è¨­è¨ˆæ–‡æ›¸ note.md ã‚ˆã‚Š
        expect(ecsClusterConstruct.cluster).toBeDefined();
      });
    });

    // ============================================================================
    // TC-ECS-CLUSTER-05: VPC é–¢é€£ä»˜ã‘ç¢ºèª
    // ğŸ”µ ä¿¡é ¼æ€§: REQ-012 ã‚ˆã‚Š
    // ============================================================================
    describe('TC-ECS-CLUSTER-05: VPC é–¢é€£ä»˜ã‘ç¢ºèª', () => {
      // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: ECS Cluster ãŒæŒ‡å®šã•ã‚ŒãŸ VPC ã«é–¢é€£ä»˜ã‘ã‚‰ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
      // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: Cluster ãŒæ­£ã—ã„ VPC å†…ã«ä½œæˆã•ã‚Œã‚‹ã“ã¨ã‚’æ¤œè¨¼
      // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ecsClusterConstruct.cluster.vpc ãŒæŒ‡å®šã—ãŸ VPC ã¨ä¸€è‡´ã™ã‚‹ã“ã¨
      // ğŸ”µ ä¿¡é ¼æ€§: REQ-012 ã‚ˆã‚Š

      test('cluster ãŒæŒ‡å®šã—ãŸ VPC ã«é–¢é€£ä»˜ã‘ã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨', () => {
        // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§ EcsClusterConstruct ã‚’ä½œæˆ
        const ecsClusterConstruct = new EcsClusterConstruct(stack, 'TestCluster', { vpc });

        // ã€æ¤œè¨¼é …ç›®ã€‘: VPC é–¢é€£ä»˜ã‘ã®ç¢ºèª
        // ğŸ”µ ä¿¡é ¼æ€§: REQ-012 ã‚ˆã‚Š
        expect(ecsClusterConstruct.cluster.vpc).toBe(vpc);
      });
    });

    // ============================================================================
    // TC-ECS-CLUSTER-06: Fargate å°‚ç”¨ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ç¢ºèª
    // ğŸ”µ ä¿¡é ¼æ€§: REQ-012 ã‚ˆã‚Š (Fargate å°‚ç”¨)
    // ============================================================================
    describe('TC-ECS-CLUSTER-06: Fargate å°‚ç”¨ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ç¢ºèª', () => {
      // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: ECS Cluster ãŒ Fargate å°‚ç”¨ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
      // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: EC2 Capacity Provider ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ã“ã¨ã‚’æ¤œè¨¼
      // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: AWS::ECS::CapacityProvider ãƒªã‚½ãƒ¼ã‚¹ãŒä½œæˆã•ã‚Œãªã„ã“ã¨
      // ğŸ”µ ä¿¡é ¼æ€§: REQ-012 ã‚ˆã‚Š (Fargate å°‚ç”¨)

      test('EC2 Capacity Provider ãŒä½œæˆã•ã‚Œãªã„ã“ã¨ (Fargate å°‚ç”¨)', () => {
        // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§ EcsClusterConstruct ã‚’ä½œæˆ
        new EcsClusterConstruct(stack, 'TestCluster', { vpc });
        const template = Template.fromStack(stack);

        // ã€æ¤œè¨¼é …ç›®ã€‘: EC2 Capacity Provider ã®ä¸åœ¨ç¢ºèª
        // ğŸ”µ ä¿¡é ¼æ€§: REQ-012 ã‚ˆã‚Š
        template.resourceCountIs('AWS::ECS::CapacityProvider', 0);
      });
    });

    // ============================================================================
    // TC-ECS-CLUSTER-07: cluster.clusterName ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ç¢ºèª
    // ğŸ”µ ä¿¡é ¼æ€§: è¨­è¨ˆæ–‡æ›¸ã‚ˆã‚Š
    // ============================================================================
    describe('TC-ECS-CLUSTER-07: cluster.clusterName ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ç¢ºèª', () => {
      // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: å…¬é–‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‹ã‚‰ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åãŒå–å¾—ã§ãã‚‹ã“ã¨ã‚’ç¢ºèª
      // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: cluster.clusterName ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’æ¤œè¨¼
      // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: CloudFormation ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åãŒæ­£ã—ãè¨­å®šã•ã‚Œã‚‹ã“ã¨
      // ğŸ”µ ä¿¡é ¼æ€§: è¨­è¨ˆæ–‡æ›¸ã‚ˆã‚Š

      test('cluster.clusterName ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒæ­£ã—ãå–å¾—ã§ãã‚‹ã“ã¨', () => {
        // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: clusterName ã‚’æŒ‡å®šã—ã¦ EcsClusterConstruct ã‚’ä½œæˆ
        const ecsClusterConstruct = new EcsClusterConstruct(stack, 'TestCluster', {
          vpc,
          clusterName: 'test-cluster-name',
        });
        const template = Template.fromStack(stack);

        // ã€æ¤œè¨¼é …ç›®ã€‘: clusterName ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã“ã¨ï¼ˆCDK Token ã¨ã—ã¦å­˜åœ¨ï¼‰
        // ğŸ”µ ä¿¡é ¼æ€§: è¨­è¨ˆæ–‡æ›¸ã‚ˆã‚Š
        expect(ecsClusterConstruct.cluster.clusterName).toBeDefined();

        // ã€æ¤œè¨¼é …ç›®ã€‘: CloudFormation ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨
        // ğŸ”µ ä¿¡é ¼æ€§: è¨­è¨ˆæ–‡æ›¸ã‚ˆã‚Š
        template.hasResourceProperties('AWS::ECS::Cluster', {
          ClusterName: 'test-cluster-name',
        });
      });
    });
  });

  // ============================================================================
  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
  // ============================================================================

  describe('ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤', () => {
    // ============================================================================
    // TC-ECS-CLUSTER-08: Container Insights ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ç¢ºèª
    // ğŸ”µ ä¿¡é ¼æ€§: REQ-013, NFR-301 ã‚ˆã‚Š
    // ============================================================================
    describe('TC-ECS-CLUSTER-08: Container Insights ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ç¢ºèª', () => {
      // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: containerInsights æœªæŒ‡å®šæ™‚ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ‰åŠ¹åŒ–ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
      // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ä½œã§ Container Insights ãŒ enabled ã«ãªã‚‹ã“ã¨ã‚’æ¤œè¨¼
      // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ClusterSettings ã« containerInsights: enabled ãŒå«ã¾ã‚Œã‚‹
      // ğŸ”µ ä¿¡é ¼æ€§: REQ-013, NFR-301 ã‚ˆã‚Š

      test('containerInsights æœªæŒ‡å®šæ™‚ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ enabled ã«ãªã‚‹ã“ã¨', () => {
        // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: containerInsights ã‚’æŒ‡å®šã—ãªã„ã§ EcsClusterConstruct ã‚’ä½œæˆ
        new EcsClusterConstruct(stack, 'TestCluster', { vpc });
        const template = Template.fromStack(stack);

        // ã€æ¤œè¨¼é …ç›®ã€‘: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® containerInsights è¨­å®šç¢ºèª
        // ã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¯¾å¿œã€‘: containerInsightsV2 ã§ã¯ 'enhanced'ï¼ˆENHANCED ãƒ¢ãƒ¼ãƒ‰ï¼‰
        // ğŸ”µ ä¿¡é ¼æ€§: REQ-013, NFR-301 ã‚ˆã‚Š
        template.hasResourceProperties('AWS::ECS::Cluster', {
          ClusterSettings: Match.arrayWith([
            Match.objectLike({
              Name: 'containerInsights',
              Value: 'enhanced',
            }),
          ]),
        });
      });
    });

    // ============================================================================
    // TC-ECS-CLUSTER-09: Cluster åãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ç¢ºèª
    // ğŸŸ¡ ä¿¡é ¼æ€§: CDK ã®å‹•ä½œä»•æ§˜ã‚ˆã‚Š
    // ============================================================================
    describe('TC-ECS-CLUSTER-09: Cluster åãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ç¢ºèª', () => {
      // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: clusterName æœªæŒ‡å®šæ™‚ã« CDK ãŒè‡ªå‹•ç”Ÿæˆã™ã‚‹ã“ã¨ã‚’ç¢ºèª
      // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åã‚’æŒ‡å®šã—ãªã„å ´åˆã®å‹•ä½œã‚’æ¤œè¨¼
      // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ClusterName ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒè¨­å®šã•ã‚Œãªã„ï¼ˆCDK ãŒè‡ªå‹•ç”Ÿæˆã™ã‚‹ï¼‰
      // ğŸŸ¡ ä¿¡é ¼æ€§: CDK ã®å‹•ä½œä»•æ§˜ã‚ˆã‚Š

      test('clusterName æœªæŒ‡å®šæ™‚ã« ClusterName ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒè¨­å®šã•ã‚Œãªã„ã“ã¨', () => {
        // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: clusterName ã‚’æŒ‡å®šã—ãªã„ã§ EcsClusterConstruct ã‚’ä½œæˆ
        new EcsClusterConstruct(stack, 'TestCluster', { vpc });
        const template = Template.fromStack(stack);

        // ã€æ¤œè¨¼é …ç›®ã€‘: ClusterName ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ä¸åœ¨ç¢ºèª
        // ğŸŸ¡ ä¿¡é ¼æ€§: CDK ã®å‹•ä½œä»•æ§˜ã‚ˆã‚Š
        // clusterName ã‚’æŒ‡å®šã—ãªã„å ´åˆã€ClusterName ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯è¨­å®šã•ã‚Œãªã„
        // (CDK ãŒè«–ç†IDã‹ã‚‰è‡ªå‹•ç”Ÿæˆ)
        const clusters = template.findResources('AWS::ECS::Cluster');
        const clusterValues = Object.values(clusters);

        // ECS Cluster ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
        expect(clusterValues.length).toBeGreaterThan(0);

        // ClusterName ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ã“ã¨ã‚’ç¢ºèª
        const clusterProps = (clusterValues[0] as any).Properties || {};
        expect(clusterProps.ClusterName).toBeUndefined();
      });
    });
  });

  // ============================================================================
  // å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
  // ============================================================================

  describe('å¢ƒç•Œå€¤', () => {
    // ============================================================================
    // TC-ECS-CLUSTER-10: Cluster åæœ€å¤§é•·ç¢ºèª
    // ğŸŸ¡ ä¿¡é ¼æ€§: AWS ECS ã®åˆ¶é™ã‚ˆã‚Š
    // ============================================================================
    describe('TC-ECS-CLUSTER-10: Cluster åæœ€å¤§é•·ç¢ºèª', () => {
      // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åã®æœ€å¤§é•·ï¼ˆ255æ–‡å­—ï¼‰ã‚’ä½¿ç”¨ã—ãŸå ´åˆã®å‹•ä½œç¢ºèª
      // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: ECS ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åã®ä¸Šé™ã«è¿‘ã„åå‰ã§ã‚‚æ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’æ¤œè¨¼
      // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: 255æ–‡å­—ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åãŒæ­£ã—ãè¨­å®šã•ã‚Œã‚‹ã“ã¨
      // ğŸŸ¡ ä¿¡é ¼æ€§: AWS ECS ã®åˆ¶é™ã‚ˆã‚Š

      test('ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åãŒ 255 æ–‡å­—ã§ã‚‚æ­£å¸¸ã«ä½œæˆã•ã‚Œã‚‹ã“ã¨', () => {
        // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: 255æ–‡å­—ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åã§ EcsClusterConstruct ã‚’ä½œæˆ
        const longClusterName = 'a'.repeat(255);
        new EcsClusterConstruct(stack, 'TestCluster', {
          vpc,
          clusterName: longClusterName,
        });
        const template = Template.fromStack(stack);

        // ã€æ¤œè¨¼é …ç›®ã€‘: 255æ–‡å­—ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åã®è¨­å®šç¢ºèª
        // ğŸŸ¡ ä¿¡é ¼æ€§: AWS ECS ã®åˆ¶é™ã‚ˆã‚Š
        template.hasResourceProperties('AWS::ECS::Cluster', {
          ClusterName: longClusterName,
        });
      });
    });

    // ============================================================================
    // TC-ECS-CLUSTER-11: Cluster åæœ€å°é•·ç¢ºèª
    // ğŸŸ¡ ä¿¡é ¼æ€§: AWS ECS ã®åˆ¶é™ã‚ˆã‚Š
    // ============================================================================
    describe('TC-ECS-CLUSTER-11: Cluster åæœ€å°é•·ç¢ºèª', () => {
      // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åã®æœ€å°é•·ï¼ˆ1æ–‡å­—ï¼‰ã‚’ä½¿ç”¨ã—ãŸå ´åˆã®å‹•ä½œç¢ºèª
      // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: 1æ–‡å­—ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åã§ã‚‚æ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’æ¤œè¨¼
      // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: 1æ–‡å­—ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åãŒæ­£ã—ãè¨­å®šã•ã‚Œã‚‹ã“ã¨
      // ğŸŸ¡ ä¿¡é ¼æ€§: AWS ECS ã®åˆ¶é™ã‚ˆã‚Š

      test('ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åãŒ 1 æ–‡å­—ã§ã‚‚æ­£å¸¸ã«ä½œæˆã•ã‚Œã‚‹ã“ã¨', () => {
        // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: 1æ–‡å­—ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åã§ EcsClusterConstruct ã‚’ä½œæˆ
        new EcsClusterConstruct(stack, 'TestCluster', {
          vpc,
          clusterName: 'a',
        });
        const template = Template.fromStack(stack);

        // ã€æ¤œè¨¼é …ç›®ã€‘: 1æ–‡å­—ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åã®è¨­å®šç¢ºèª
        // ğŸŸ¡ ä¿¡é ¼æ€§: AWS ECS ã®åˆ¶é™ã‚ˆã‚Š
        template.hasResourceProperties('AWS::ECS::Cluster', {
          ClusterName: 'a',
        });
      });
    });
  });

  // ============================================================================
  // ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹
  // ============================================================================

  describe('ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹', () => {
    // ============================================================================
    // TC-ECS-CLUSTER-12: Container Insights ç„¡åŠ¹åŒ–ç¢ºèª
    // ğŸŸ¡ ä¿¡é ¼æ€§: æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆï¼ˆãŸã ã— REQ-013 ã«åã™ã‚‹ãŸã‚éæ¨å¥¨ï¼‰
    // ============================================================================
    describe('TC-ECS-CLUSTER-12: Container Insights ç„¡åŠ¹åŒ–ç¢ºèª', () => {
      // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: containerInsights: false ã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã—ãŸå ´åˆã®å‹•ä½œç¢ºèª
      // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: Container Insights ã‚’ç„¡åŠ¹åŒ–ã§ãã‚‹ã“ã¨ã‚’æ¤œè¨¼ï¼ˆéæ¨å¥¨ã ãŒå¯èƒ½ï¼‰
      // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ClusterSettings ã« containerInsights: disabled ãŒå«ã¾ã‚Œã‚‹
      // ğŸŸ¡ ä¿¡é ¼æ€§: æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆï¼ˆãŸã ã— REQ-013 ã«åã™ã‚‹ãŸã‚éæ¨å¥¨ï¼‰

      test('Container Insights ã‚’ç„¡åŠ¹åŒ–ã§ãã‚‹ã“ã¨ (éæ¨å¥¨)', () => {
        // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: containerInsights: false ã‚’æŒ‡å®šã—ã¦ EcsClusterConstruct ã‚’ä½œæˆ
        new EcsClusterConstruct(stack, 'TestCluster', {
          vpc,
          containerInsights: false,
        });
        const template = Template.fromStack(stack);

        // ã€æ¤œè¨¼é …ç›®ã€‘: containerInsights: disabled ã®è¨­å®šç¢ºèª
        // ğŸŸ¡ ä¿¡é ¼æ€§: æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆï¼ˆãŸã ã— REQ-013 ã«åã™ã‚‹ãŸã‚éæ¨å¥¨ï¼‰
        template.hasResourceProperties('AWS::ECS::Cluster', {
          ClusterSettings: Match.arrayWith([
            Match.objectLike({
              Name: 'containerInsights',
              Value: 'disabled',
            }),
          ]),
        });
      });
    });

    // ============================================================================
    // TC-ECS-CLUSTER-13: ç‰¹æ®Šæ–‡å­—ã‚’å«ã‚€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åç¢ºèª
    // ğŸŸ¡ ä¿¡é ¼æ€§: AWS ECS ã®å‘½åè¦å‰‡ã‚ˆã‚Š
    // ============================================================================
    describe('TC-ECS-CLUSTER-13: ç‰¹æ®Šæ–‡å­—ã‚’å«ã‚€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åç¢ºèª', () => {
      // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åã«è¨±å¯ã•ã‚ŒãŸç‰¹æ®Šæ–‡å­—ï¼ˆãƒã‚¤ãƒ•ãƒ³ã€ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ï¼‰ã‚’å«ã‚€å ´åˆã®å‹•ä½œç¢ºèª
      // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: ECS ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åã¨ã—ã¦æœ‰åŠ¹ãªç‰¹æ®Šæ–‡å­—ãŒä½¿ç”¨ã§ãã‚‹ã“ã¨ã‚’æ¤œè¨¼
      // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ç‰¹æ®Šæ–‡å­—ã‚’å«ã‚€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åãŒæ­£ã—ãè¨­å®šã•ã‚Œã‚‹ã“ã¨
      // ğŸŸ¡ ä¿¡é ¼æ€§: AWS ECS ã®å‘½åè¦å‰‡ã‚ˆã‚Š

      test('ç‰¹æ®Šæ–‡å­— (ãƒã‚¤ãƒ•ãƒ³ã€ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢) ã‚’å«ã‚€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åãŒä½¿ç”¨ã§ãã‚‹ã“ã¨', () => {
        // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: ç‰¹æ®Šæ–‡å­—ã‚’å«ã‚€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åã§ EcsClusterConstruct ã‚’ä½œæˆ
        const clusterName = 'my-test_cluster-01';
        new EcsClusterConstruct(stack, 'TestCluster', {
          vpc,
          clusterName,
        });
        const template = Template.fromStack(stack);

        // ã€æ¤œè¨¼é …ç›®ã€‘: ç‰¹æ®Šæ–‡å­—ã‚’å«ã‚€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼åã®è¨­å®šç¢ºèª
        // ğŸŸ¡ ä¿¡é ¼æ€§: AWS ECS ã®å‘½åè¦å‰‡ã‚ˆã‚Š
        template.hasResourceProperties('AWS::ECS::Cluster', {
          ClusterName: clusterName,
        });
      });
    });

    // ============================================================================
    // TC-ECS-CLUSTER-14: è¤‡æ•°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆç¢ºèª
    // ğŸŸ¡ ä¿¡é ¼æ€§: CDK ã®å‹•ä½œä»•æ§˜ã‚ˆã‚Š
    // ============================================================================
    describe('TC-ECS-CLUSTER-14: è¤‡æ•°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆç¢ºèª', () => {
      // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: åŒä¸€ Stack å†…ã§è¤‡æ•°ã® EcsClusterConstruct ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã§ãã‚‹ã“ã¨ã‚’ç¢ºèª
      // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: è¤‡æ•°ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚’åŒæ™‚ã«ä½œæˆã§ãã‚‹ã“ã¨ã‚’æ¤œè¨¼
      // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: 2 ã¤ã® AWS::ECS::Cluster ãƒªã‚½ãƒ¼ã‚¹ãŒä½œæˆã•ã‚Œã‚‹ã“ã¨
      // ğŸŸ¡ ä¿¡é ¼æ€§: CDK ã®å‹•ä½œä»•æ§˜ã‚ˆã‚Š

      test('è¤‡æ•°ã® ECS Cluster ã‚’åŒæ™‚ã«ä½œæˆã§ãã‚‹ã“ã¨', () => {
        // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: 2ã¤ã® EcsClusterConstruct ã‚’ä½œæˆ
        new EcsClusterConstruct(stack, 'TestCluster1', {
          vpc,
          clusterName: 'cluster-1',
        });
        new EcsClusterConstruct(stack, 'TestCluster2', {
          vpc,
          clusterName: 'cluster-2',
        });
        const template = Template.fromStack(stack);

        // ã€æ¤œè¨¼é …ç›®ã€‘: ECS Cluster ãƒªã‚½ãƒ¼ã‚¹ãŒ 2 ã¤ä½œæˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
        // ğŸŸ¡ ä¿¡é ¼æ€§: CDK ã®å‹•ä½œä»•æ§˜ã‚ˆã‚Š
        template.resourceCountIs('AWS::ECS::Cluster', 2);
      });
    });
  });

  // ============================================================================
  // ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
  // ============================================================================

  describe('ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ', () => {
    // ============================================================================
    // TC-ECS-CLUSTER-15: CloudFormation ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆç¢ºèª
    // ğŸ”µ ä¿¡é ¼æ€§: å“è³ªä¿è¨¼ã®ãŸã‚
    // ============================================================================
    describe('TC-ECS-CLUSTER-15: CloudFormation ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆç¢ºèª', () => {
      // ã€ãƒ†ã‚¹ãƒˆç›®çš„ã€‘: ç”Ÿæˆã•ã‚Œã‚‹ CloudFormation ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒæœŸå¾…é€šã‚Šã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
      // ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€‘: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ„å›³ã—ãªã„å¤‰æ›´ã‚’æ¤œå‡º
      // ã€æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œã€‘: ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¨ä¸€è‡´ã™ã‚‹ã“ã¨
      // ğŸ”µ ä¿¡é ¼æ€§: å“è³ªä¿è¨¼ã®ãŸã‚

      test('CloudFormation ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¨ä¸€è‡´ã™ã‚‹ã“ã¨', () => {
        // ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ã€‘: å›ºå®šã®è¨­å®šã§ EcsClusterConstruct ã‚’ä½œæˆ
        new EcsClusterConstruct(stack, 'TestCluster', {
          vpc,
          clusterName: 'snapshot-test-cluster',
          containerInsights: true,
        });
        const template = Template.fromStack(stack);

        // ã€æ¤œè¨¼é …ç›®ã€‘: ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¨ã®ä¸€è‡´ç¢ºèª
        // ğŸ”µ ä¿¡é ¼æ€§: å“è³ªä¿è¨¼ã®ãŸã‚
        expect(template.toJSON()).toMatchSnapshot();
      });
    });
  });
});
